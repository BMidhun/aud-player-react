(this["webpackJsonpreact-music-player"]=this["webpackJsonpreact-music-player"]||[]).push([[0],{141:function(e,t,c){"use strict";c.r(t);var n=c(47),a=c.n(n),i=(c(54),c(35)),r=c(13),s=c(8);var l=function(e){if(e){for(var t=[],c=0;c<e.length;c++)t.push(e[c]);return t}return[]};var o=function(e){return Math.floor(Math.random()*e)},u=c(0);var b=function(e){var t=e.togglePlaylist,c=e.changePlayList,n=Object(s.useRef)();return Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsxs)("label",{htmlFor:"filepPicker",className:"btn",onClick:function(){n.current.click()},children:[Object(u.jsx)("input",{type:"file",accept:"audio/*",multiple:!0,id:"filePicker",ref:n,onChange:function(e){c(e.target.files)}}),Object(u.jsx)("i",{className:"bi bi-plus-square"})]}),Object(u.jsx)("button",{type:"button",className:"btn",onClick:t,children:Object(u.jsx)("i",{className:"bi bi-music-note-list"})})]})};var j=function(e){var t=new Date;t.setHours(e/3600%24),t.setMinutes(e/60%60),t.setSeconds(e%60);var c=(t=t.toTimeString().split(" ")[0]).split(":"),n=Object(r.a)(c,3),a=n[0],i=n[1],s=n[2];return parseInt(a)?"".concat(a,":").concat(i,":").concat(s):"".concat(i,":").concat(s)},d=c(29),m=c.p+"static/media/audio-icon.e4029d57.png";function v(e){var t,c=e.currentTrack,n=e.hasNext,a=e.hasPrev,i=e.onNext,l=e.onPrevious,o=e.shouldRepeat,b=e.toggleRepeat,v=e.toggleShuffle,f=e.shouldShuffle,O=Object(s.useState)(),p=Object(r.a)(O,2),h=p[0],x=p[1],g=Object(s.useState)(""),y=Object(r.a)(g,2),N=y[0],k=y[1],S=Object(s.useState)(!1),P=Object(r.a)(S,2),T=P[0],E=P[1];Object(s.useEffect)((function(){var e=C.current;function t(e){i()}return e&&e.addEventListener("ended",t),function(){e.removeEventListener("ended",t)}}),[i]);var w=Object(s.useRef)(),L=Object(s.useRef)(),C=Object(s.useRef)(),R=function(e){var t=j(e.target.currentTime);k(t);var c=e.target.currentTime/e.target.duration*100;w.current&&(w.current.style.width=c+"%")};function F(e){if(L.current){var t=C.current,c=t.duration,n=(e.offsetX/L.current.clientWidth).toFixed(6);n=(c*n).toFixed(6),t.currentTime=n}}return Object(s.useEffect)((function(){C.current.loop=o}),[o]),Object(s.useEffect)((function(){var e=C.current,t=w.current;return c?(k("00:00"),Object(d.a)(c).then((function(e){x(e)}))):x(void 0),function(){e&&t&&c&&(k(""),E(!1),t.style.width="0%",e.removeEventListener("playing",(function(){E(!0)})),e.removeEventListener("pause",(function(){E(!1)})),e.removeEventListener("timeupdate",R),t.removeEventListener("click",F))}}),[c]),Object(s.useEffect)((function(){var e=C.current,t=L.current;h&&c&&(e.src=URL.createObjectURL(c),e.addEventListener("playing",(function(){E(!0)})),e.addEventListener("pause",(function(){E(!1)})),e.addEventListener("timeupdate",R),t.addEventListener("click",F),setTimeout((function(){e.play()}),100))}),[h,c]),Object(u.jsxs)("div",{className:"player",children:[Object(u.jsx)("audio",{ref:C,id:"audioPlayer"}),Object(u.jsx)("div",{className:"track-image-wrap",children:Object(u.jsxs)("picture",{className:"track-image",children:[Object(u.jsx)("source",{srcSet:(null===h||void 0===h||null===(t=h.imageSrc)||void 0===t?void 0:t.format)?"data:".concat(h.imageSrc.format,";base64,").concat(h.imageSrc.data.toString("base64")):""}),Object(u.jsx)("img",{src:m,alt:"albumcover.jpg"})]})}),c&&Object(u.jsxs)("div",{className:"track-details text-center",children:[Object(u.jsx)("h3",{children:(null===h||void 0===h?void 0:h.albumTitle)||"Album N/A"}),Object(u.jsx)("p",{children:(null===h||void 0===h?void 0:h.artistName)||"Artist N/A"})]}),c&&Object(u.jsxs)("div",{className:"progress",children:[Object(u.jsx)("div",{className:"progress-bar-wrap",ref:L,children:Object(u.jsx)("div",{className:"progress-bar",ref:w})}),h&&h.duration&&Object(u.jsxs)("div",{className:"progress-time-wrap",children:[Object(u.jsx)("span",{children:N}),Object(u.jsx)("span",{children:j(h.duration)})]})]}),c&&h?Object(u.jsxs)("div",{className:"player-controls",children:[Object(u.jsx)("button",{type:"button",className:"btn ".concat(o&&"btn-active"),onClick:b,children:Object(u.jsx)("i",{className:"bi bi-arrow-repeat"})}),Object(u.jsx)("button",{type:"button",className:"btn",disabled:!a,onClick:l,children:Object(u.jsx)("i",{className:"bi bi-chevron-bar-left"})}),Object(u.jsx)("button",{type:"button",className:"btn btn--lg btn-play",onClick:function(){T?function(){var e=C.current;!e.paused&&T&&e.pause()}():function(){var e=C.current;e.paused&&!T&&e.play()}()},children:T?Object(u.jsx)("i",{className:"bi bi-pause"}):Object(u.jsx)("i",{className:"bi bi-play"})}),Object(u.jsx)("button",{type:"button",className:"btn",disabled:!n,onClick:i,children:Object(u.jsx)("i",{className:"bi bi-chevron-bar-right"})}),Object(u.jsx)("button",{type:"button",className:"btn ".concat(f&&"btn-active"),onClick:v,children:Object(u.jsx)("i",{className:"bi bi-shuffle"})})]}):Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)("h2",{children:"Please add tracks to enjoy music"})})]})}var f=Object(s.memo)(v);var O=function(e){var t=e.togglePlaylist;return Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsx)("button",{className:"btn",type:"button",onClick:t,children:Object(u.jsx)("i",{className:"bi bi-chevron-left"})}),Object(u.jsx)("h2",{children:"Playlist"})]})};var p=function(e){var t,c,n=e.trackData,a=e.index,i=e.selectTrackFromPlaylist,l=Object(s.useState)(void 0),o=Object(r.a)(l,2),b=o[0],v=o[1];return Object(s.useEffect)((function(){n&&Object(d.a)(n).then((function(e){v(e)}))}),[n]),Object(u.jsxs)("div",{className:"playlist-track-wrap",onClick:function(){i(a)},children:[Object(u.jsx)("div",{className:"playlist-image-wrap",children:Object(u.jsxs)("picture",{children:[Object(u.jsx)("source",{srcSet:(null===b||void 0===b||null===(t=b.imageSrc)||void 0===t?void 0:t.format)?"data:".concat(null===b||void 0===b||null===(c=b.imageSrc)||void 0===c?void 0:c.format,";base64,").concat(b.imageSrc.data.toString("base64")):""}),Object(u.jsx)("img",{src:m,alt:"albumcover.jpg"})]})}),Object(u.jsxs)("div",{className:"playlist-track-detail",children:[Object(u.jsx)("h4",{children:b&&b.albumTitle?b.albumTitle:"N/A"}),Object(u.jsx)("p",{children:b&&b.artistName?b.artistName:"N/A"})]}),Object(u.jsx)("p",{children:b&&b.duration?j(b.duration):"N/A"})]})};function h(e){var t=e.playlist,c=e.selectTrackFromPlaylist;return t.length?Object(u.jsx)("div",{className:"tracklist",children:t.map((function(e,t){return Object(u.jsx)(p,{trackData:e,index:t,selectTrackFromPlaylist:c},e.name+t)}))}):Object(u.jsx)("div",{className:"no-tracks",children:Object(u.jsx)("h2",{children:"Please add some tracks"})})}var x=function(e){var t=e.openPlaylist,c=e.togglePlaylist,n=e.playlist,a=e.selectTrackFromPlaylist;return Object(u.jsxs)("div",{className:"playlist playlist-".concat(t?"show":"hide"),children:[Object(u.jsx)(O,{togglePlaylist:c}),Object(u.jsx)(h,{playlist:n,selectTrackFromPlaylist:a})]})};var g=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(0),j=Object(r.a)(a,2),d=j[0],m=j[1],v=Object(s.useState)([]),O=Object(r.a)(v,2),p=O[0],h=O[1],g=Object(s.useState)(!1),y=Object(r.a)(g,2),N=y[0],k=y[1],S=Object(s.useState)(!1),P=Object(r.a)(S,2),T=P[0],E=P[1];return Object(u.jsx)("div",{className:"mobile-layout",children:Object(u.jsxs)("div",{className:"screen",children:[Object(u.jsx)(b,{togglePlaylist:function(){n(!0)},changePlayList:function(e){(null===p||void 0===p?void 0:p.length)&&(null===e||void 0===e?void 0:e.length)?h((function(t){return[].concat(Object(i.a)(t),Object(i.a)(l(e)))})):p.length||!(null===e||void 0===e?void 0:e.length)||h(l(e))}}),Object(u.jsx)(x,{openPlaylist:c,togglePlaylist:function(){n(!1)},playlist:p,selectTrackFromPlaylist:function(e){n(!1),m(e)}}),Object(u.jsx)(f,{currentTrack:p?p[d]:null,hasPrev:Boolean((d||T)&&!N),hasNext:Boolean((d!==(p?p.length-1:0)||T)&&!N),onPrevious:function(){var e=p?p.length:0;N||(T?m(o(e)):d&&m((function(e){return e-1})))},onNext:function(){var e=p?p.length:0;N||(T?m(o(e)):d===e-1||m((function(e){return e+1})))},shouldRepeat:N,toggleRepeat:function(){k((function(e){return!e}))},toggleShuffle:function(){E((function(e){return!e}))},shouldShuffle:T})]})})};a.a.render(Object(u.jsx)(s.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root"))},29:function(e,t,c){"use strict";(function(e){var n=c(4),a=c.n(n),i=c(48),r=c(49),s=function(){var t=Object(i.a)(a.a.mark((function t(c){var n,i,s,l,o,u,b,j,d,m,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=e,t.next=4,c.arrayBuffer();case 4:return t.t1=t.sent,d=t.t0.from.call(t.t0,t.t1),t.next=8,r.parseBuffer(d,{mimeType:c.type});case 8:return m=t.sent,(null===(n=m.common)||void 0===n?void 0:n.picture)&&(null===(i=m.common)||void 0===i||null===(s=i.picture)||void 0===s||s[0].data.toString("base64")),v={albumTitle:null===(l=m.common)||void 0===l?void 0:l.title,artistName:null===(o=m.common)||void 0===o?void 0:o.artist,imageSrc:null===(u=m.common)||void 0===u||null===(b=u.picture)||void 0===b?void 0:b[0],duration:null===(j=m.format)||void 0===j?void 0:j.duration},t.abrupt("return",v);case 14:t.prev=14,t.t2=t.catch(0),console.log(t.t2);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();t.a=s}).call(this,c(10).Buffer)},54:function(e,t,c){}},[[141,1,2]]]);
//# sourceMappingURL=main.847c3825.chunk.js.map